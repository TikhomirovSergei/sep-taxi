(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{239:function(e,t,n){e.exports={root:"Router_root__3hxFK"}},243:function(e,t,n){e.exports=n(610)},248:function(e,t,n){},610:function(e,t,n){"use strict";n.r(t);var a,r,c,o=n(2),i=n.n(o),u=n(42),s=n.n(u),l=(n(248),n(63)),p=n(64),O=n(67),b=n(65),j=n(68),f=n(612),m=n(616),d=n(614),h=n(613),E=n(27),v=n(97),x=n(95),g=n.n(x),T=n(237),y=n.n(T),w=n(87),S=n.n(w),A=n(96),R=n(238),k=n.n(R),I=n(14),U=n.n(I),_=n(66),N=n(43),C=n(611),H=n(615),L=Object(H.a)("AUTH/REGISTRATION"),F=Object(H.a)("AUTH/AUTHORIZATION"),z=Object(H.a)("AUTH/REGISTRATION_REQUEST"),P=Object(H.a)("AUTH/REGISTRATION_SUCCESS"),D=Object(H.a)("AUTH/REGISTRATION_FAILURE"),G=Object(H.a)("AUTH/AUTHORIZATION_REQUEST"),B=Object(H.a)("AUTH/AUTHORIZATION_SUCCESS"),J=Object(H.a)("AUTH/AUTHORIZATION_FAILURE"),V=Object(H.a)("AUTH/SET_USER_CREDENTIALS"),X=Object(H.a)("AUTH/REMOVE_USER_CREDENTIALS"),Z=Object(H.a)("AUTH/SET_TOKEN"),K=Object(H.a)("AUTH/REMOVE_TOKEN"),M=Object(H.a)("AUTH/LOGOUT"),Q=Object(C.a)((a={},Object(E.a)(a,V,function(e,t){return t.payload.id}),Object(E.a)(a,X,function(){return null}),a),null),q=Object(C.a)((r={},Object(E.a)(r,V,function(e,t){return t.payload.email}),Object(E.a)(r,X,function(){return null}),r),null),W=Object(C.a)((c={},Object(E.a)(c,Z,function(e,t){return t.payload}),Object(E.a)(c,K,function(){return null}),c),null),Y=Object(N.c)({id:Q,email:q,jwt_token:W}),$=function(e){return null!==e.auth.jwt_token},ee=function(e){return e.auth.jwt_token},te=n(32),ne=n.n(te),ae=n(13),re=n(236),ce=function(e){var t=e.path,n=e.method,a=void 0===n?"GET":n,r=e.body,c=e.token;return fetch("".concat("http://localhost:5000").concat(t),{method:a,body:r,headers:re.Object.assign({},{"content-type":"application/json"},c&&{Authorization:"Bearer ".concat(c)}),mode:"cors"}).then(function(e){return e.status<400?e.json():Promise.reject(e)})},oe=function(e,t){return ce({path:"/session",method:"POST",body:JSON.stringify({email:e,password:t})})},ie=function(e,t){return ce({path:"/user",method:"POST",body:JSON.stringify({email:e,password:t})})},ue="uber-app",se=function(e){localStorage.setItem(ue,JSON.stringify(e))},le=function(){localStorage.setItem(ue,null)},pe=function(){var e,t=localStorage.getItem(ue);try{e=JSON.parse(t)}catch(n){e=null}return e},Oe=ne.a.mark(me),be=ne.a.mark(de),je=ne.a.mark(he),fe=ne.a.mark(Ee);function me(){return ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ae.f)(G,he);case 2:return e.next=4,Object(ae.f)(z,Ee);case 4:return e.next=6,Object(ae.b)(de);case 6:case"end":return e.stop()}},Oe,this)}function de(){var e,t,n,a,r,c;return ne.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(null!==(e=pe())){o.next=28;break}return o.next=5,Object(ae.e)([L,F]);case 5:if(t=o.sent,n=void 0,t.type!==L.toString()){o.next=17;break}return o.next=10,Object(ae.c)(z(t.payload));case 10:return o.next=12,Object(ae.e)([D,P]);case 12:if((n=o.sent).type!==D.toString()){o.next=15;break}return o.abrupt("continue",0);case 15:o.next=24;break;case 17:return o.next=19,Object(ae.c)(G(t.payload));case 19:return o.next=21,Object(ae.e)([J,B]);case 21:if((n=o.sent).type!==J.toString()){o.next=24;break}return o.abrupt("continue",0);case 24:return a=n.payload,r=a.token,c=a.user,o.next=27,Object(ae.c)(V(c));case 27:se(r);case 28:return o.next=30,Object(ae.c)(Z(e));case 30:return o.next=32,Object(ae.e)(M);case 32:return o.next=34,Object(ae.c)(K());case 34:return o.next=36,Object(ae.c)(X());case 36:le(),o.next=0;break;case 39:case"end":return o.stop()}},be,this)}function he(e){var t;return ne.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ae.a)(oe,e.payload.email,e.payload.password);case 3:return t=n.sent,n.next=6,Object(ae.c)(B(t));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(ae.c)(J(n.t0));case 12:case"end":return n.stop()}},je,this,[[0,8]])}function Ee(e){var t;return ne.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ae.a)(ie,e.payload.email,e.payload.password);case 3:return t=n.sent,n.next=6,Object(ae.c)(P(t));case 6:n.next=12;break;case 8:return n.prev=8,n.t0=n.catch(0),n.next=12,Object(ae.c)(D(n.t0));case 12:case"end":return n.stop()}},fe,this,[[0,8]])}var ve,xe,ge=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).fields=[{label:"\u041f\u043e\u0447\u0442\u0430",type:"text",name:"email"},{label:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",name:"password"}],n.state={values:{email:"",password:""},isRegistrationForm:!1},n.handleChange=function(e){var t=e.target.name,a=e.target.value;n.setState(function(e){return{values:Object(v.a)({},e.values,Object(E.a)({},t,a))}})},n.handleEnter=function(){var e=n.state,t=e.isRegistrationForm,a=e.values,r=n.props,c=r.authorization,o=r.registration;t?o(a):c(a)},n.switchForm=function(){n.setState(function(e){return{isRegistrationForm:!e.isRegistrationForm}})},n}return Object(j.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.classes,a=t.isAuthorized,r=this.state,c=r.values,o=r.isRegistrationForm;return a?i.a.createElement(h.a,{to:"/profile"}):i.a.createElement(g.a,{className:n.root},i.a.createElement(S.a,{className:n.title,component:"h5",variant:"h5",onClick:this.switchForm},i.a.createElement("span",{className:U()(n.span,Object(E.a)({},n.selected,!o))},"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f")," ","/"," ",i.a.createElement("span",{className:U()(n.span,Object(E.a)({},n.selected,o))},"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f")),this.fields.map(function(t){return i.a.createElement(y.a,{key:t.name,name:t.name,type:t.type,value:c[t.name],onChange:e.handleChange,className:n.input,label:t.label,autoComplete:"nope",margin:"dense"})}),i.a.createElement("div",{className:n.buttonGroup},i.a.createElement(k.a,{onClick:this.handleEnter,color:"primary",fullWidth:!0,variant:"contained"},o?"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f":"\u0412\u043e\u0439\u0442\u0438")))}}]),t}(o.PureComponent),Te={authorization:F,registration:L},ye=Object(_.b)(function(e){return{isAuthorized:$(e)}},Te)(Object(A.withStyles)(function(e){return{root:Object(v.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,width:400}),title:{width:"100%",textAlign:"center"},input:{width:"100%"},span:{color:"#999",userSelect:"none"},selected:{color:"#000"},buttonGroup:{padding:"20px 0 10px",display:"flex",alignItems:"center",justifyContent:"center"}}})(ge)),we=n(241),Se=n.n(we),Ae=n(239),Re=n.n(Ae),ke=n(126),Ie=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(O.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).renderRoute=function(e){var t=n.props,a=t.isAuthorized,r=t.component;return a?i.a.createElement(r,e):i.a.createElement(h.a,{to:"/"})},n}return Object(j.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=(e.isAuthorized,e.component,Object(ke.a)(e,["isAuthorized","component"]));return i.a.createElement(d.a,Object.assign({},t,{render:this.renderRoute}))}}]),t}(o.PureComponent),Ue=Object(_.b)(function(e){return{isAuthorized:$(e)}})(Ie),_e=Object(H.a)("PROFILE/REQUEST"),Ne=Object(H.a)("PROFILE/SUCCESS"),Ce=Object(H.a)("PROFILE/FAILURE"),He=Object(C.a)((ve={},Object(E.a)(ve,_e,function(){return!0}),Object(E.a)(ve,Ne,function(){return!1}),Object(E.a)(ve,Ce,function(){return!1}),ve),!1),Le=Object(C.a)((xe={},Object(E.a)(xe,_e,function(){return null}),Object(E.a)(xe,Ne,function(e,t){var n=t.payload;n.ok;return Object(ke.a)(n,["ok"])}),xe),null),Fe=Object(N.c)({isLoading:He,data:Le}),ze=function(e){return ce({path:"/user/me",token:e})},Pe=ne.a.mark(Ge),De=ne.a.mark(Be);function Ge(){return ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ae.f)(_e,Be);case 2:case"end":return e.stop()}},Pe,this)}function Be(){var e,t;return ne.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(ae.d)(ee);case 3:return e=n.sent,n.next=6,Object(ae.a)(ze,e);case 6:return t=n.sent,n.next=9,Object(ae.c)(Ne(t));case 9:n.next=15;break;case 11:return n.prev=11,n.t0=n.catch(0),n.next=15,Object(ae.c)(Ce(n.t0));case 15:case"end":return n.stop()}},De,this,[[0,11]])}var Je=n(240),Ve=n.n(Je),Xe=function(e){function t(){return Object(l.a)(this,t),Object(O.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.profile,n=e.profileRequest;null===t&&n()}},{key:"render",value:function(){var e=this.props,t=e.isLoading,n=e.profile,a=e.classes;return t||null===n?i.a.createElement(Ve.a,{size:50}):i.a.createElement(g.a,{className:a.root,elevation:1},i.a.createElement(S.a,{variant:"h5",component:"h3",gutterBottom:!0},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"),i.a.createElement(S.a,{gutterBottom:!0,component:"p"},"ID: ",n.id),i.a.createElement(S.a,{gutterBottom:!0,component:"p"},"Email: ",n.email))}}]),t}(o.PureComponent),Ze=Object(_.b)(function(e){return{isLoading:function(e){return e.profile.isLoading}(e),profile:function(e){return e.profile.data}(e)}},{profileRequest:_e})(Object(A.withStyles)(function(e){return{root:Object(v.a)({},e.mixins.gutters(),{paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit})}})(Xe)),Ke=function(e){function t(){return Object(l.a)(this,t),Object(O.a)(this,Object(b.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement(f.a,null,i.a.createElement(Se.a,{alignItems:"center",className:Re.a.root,direction:"column",justify:"space-between",container:!0},i.a.createElement(m.a,null,i.a.createElement(d.a,{path:"/",exact:!0,component:ye}),i.a.createElement(Ue,{path:"/profile",component:Ze}),i.a.createElement(h.a,{to:"/"}))))}}]),t}(o.PureComponent),Me=n(242),Qe=ne.a.mark(We),qe=Object(N.c)({auth:Y,profile:Fe});function We(){return ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ae.b)(me);case 2:return e.next=4,Object(ae.b)(Ge);case 4:case"end":return e.stop()}},Qe,this)}var Ye=function(){var e=Object(Me.a)(),t=Object(N.e)(qe,Object(N.d)(Object(N.a)(e),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__():function(e){return e}));return e.run(We),t}();s.a.render(i.a.createElement(_.a,{store:Ye},i.a.createElement(Ke,null)),document.getElementById("root"))}},[[243,2,1]]]);
//# sourceMappingURL=main.b334e72c.chunk.js.map